<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>钩子模式 | Patterns</title>
    <meta name="description" content="Learn JavaScript design and performance patterns for building more powerful web applications.">
    <link rel="preload stylesheet" href="/learning-patterns/assets/style.39c00260.css" as="style">
    <link rel="modulepreload" href="/learning-patterns/assets/chunks/ArticleTitle.a6bef2f2.js">
    <link rel="modulepreload" href="/learning-patterns/assets/chunks/CodePreview.8b929ecb.js">
    <link rel="modulepreload" href="/learning-patterns/assets/app.ba39ac68.js">
    <link rel="modulepreload" href="/learning-patterns/assets/design_hooks.md.a30736a6.lean.js">
    
    <link rel="icon" type="image/svg+xml" href="/learning-patterns/logo.svg">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-cc16f9d3><!--[--><!--]--><!--[--><span tabindex="-1" data-v-3b6fadd0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-3b6fadd0> Skip to content </a><!--]--><!----><header class="VPNav" data-v-cc16f9d3 data-v-d5c327f5><div class="VPNavBar has-sidebar" data-v-d5c327f5 data-v-f614cde4><div class="container" data-v-f614cde4><div class="title" data-v-f614cde4><div class="VPNavBarTitle has-sidebar" data-v-f614cde4 data-v-e7ad7b7c><a class="title" href="/learning-patterns/" data-v-e7ad7b7c><!--[--><!--]--><!----><!--[-->Patterns<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-f614cde4><div class="curtain" data-v-f614cde4></div><div class="content-body" data-v-f614cde4><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-f614cde4 data-v-16bb30ac><span id="main-nav-aria-label" class="visually-hidden" data-v-16bb30ac>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-16bb30ac data-v-d9b9f834><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-d9b9f834><span class="text" data-v-d9b9f834><!----> 开始阅读 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-d9b9f834><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-d9b9f834><div class="VPMenu" data-v-d9b9f834 data-v-23903776><div class="items" data-v-23903776><!--[--><!--[--><div class="VPMenuLink" data-v-23903776 data-v-f536e928><a class="VPLink link" href="/learning-patterns/contents.html" data-v-f536e928 data-v-e660f69b><!--[-->阅读译文<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-23903776 data-v-f536e928><a class="VPLink link" href="https://www.patterns.dev/posts/" target="_blank" rel="noreferrer" data-v-f536e928 data-v-e660f69b><!--[-->阅读原文<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-e660f69b><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/learning-patterns/about.html" data-v-16bb30ac data-v-e1594e92 data-v-e660f69b><!--[-->关于<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/learning-patterns/resources.html" data-v-16bb30ac data-v-e1594e92 data-v-e660f69b><!--[-->资源<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/learning-patterns/insights.html" data-v-16bb30ac data-v-e1594e92 data-v-e660f69b><!--[-->观点<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-f614cde4 data-v-6ec2319f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-6ec2319f data-v-a620e86f data-v-9bf2e1a0><span class="check" data-v-9bf2e1a0><span class="icon" data-v-9bf2e1a0><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a620e86f><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a620e86f><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-f614cde4 data-v-ec1f40bf data-v-ca7151e3><!--[--><a class="VPSocialLink" href="https://github.com/xiaofuyesnew/learning-patterns" target="_blank" rel="noopener" data-v-ca7151e3 data-v-e381548e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://discord.gg/pF5b4WtA" target="_blank" rel="noopener" data-v-ca7151e3 data-v-e381548e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/></svg></a><a class="VPSocialLink" href="https://twitter.com/xiaofuyesnew" target="_blank" rel="noopener" data-v-ca7151e3 data-v-e381548e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-f614cde4 data-v-e06cf9c1 data-v-d9b9f834><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-d9b9f834><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-d9b9f834><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-d9b9f834><div class="VPMenu" data-v-d9b9f834 data-v-23903776><!----><!--[--><!--[--><!----><div class="group" data-v-e06cf9c1><div class="item appearance" data-v-e06cf9c1><p class="label" data-v-e06cf9c1>Appearance</p><div class="appearance-action" data-v-e06cf9c1><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-e06cf9c1 data-v-a620e86f data-v-9bf2e1a0><span class="check" data-v-9bf2e1a0><span class="icon" data-v-9bf2e1a0><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a620e86f><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a620e86f><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-e06cf9c1><div class="item social-links" data-v-e06cf9c1><div class="VPSocialLinks social-links-list" data-v-e06cf9c1 data-v-ca7151e3><!--[--><a class="VPSocialLink" href="https://github.com/xiaofuyesnew/learning-patterns" target="_blank" rel="noopener" data-v-ca7151e3 data-v-e381548e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://discord.gg/pF5b4WtA" target="_blank" rel="noopener" data-v-ca7151e3 data-v-e381548e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/></svg></a><a class="VPSocialLink" href="https://twitter.com/xiaofuyesnew" target="_blank" rel="noopener" data-v-ca7151e3 data-v-e381548e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-f614cde4 data-v-998cbf6e><span class="container" data-v-998cbf6e><span class="top" data-v-998cbf6e></span><span class="middle" data-v-998cbf6e></span><span class="bottom" data-v-998cbf6e></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-cc16f9d3 data-v-a536dd29><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a536dd29><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-a536dd29><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-a536dd29>Menu</span></button><a class="top-link" href="#" data-v-a536dd29>Return to top</a></div><aside class="VPSidebar" data-v-cc16f9d3 data-v-be880710><div class="curtain" data-v-be880710></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-be880710><span class="visually-hidden" id="sidebar-aria-label" data-v-be880710> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-be880710><section class="VPSidebarItem level-0 has-active" data-v-be880710 data-v-6791b800><div class="item" role="button" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link" data-v-6791b800 data-v-e660f69b><!--[--><h2 class="text" data-v-6791b800>设计模式</h2><!--]--><!----></a><!----></div><div class="items" data-v-6791b800><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/introduction.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>概述</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/singleton.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>单例模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/proxy.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>代理模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/provider.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>提供者模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/prototype.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>原型模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/container_presentational.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>容器/展示模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/observer.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>观察者模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/module.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>模块模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/mixin.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>混入模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/mediator_middleware.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>中介者/中间件模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/hoc.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>高阶组件模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/render_props.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>渲染属性模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/hooks.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>钩子模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/flyweight.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>享元模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/factory.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>工厂模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/compound.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>复合模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/command.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>命令模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/design/js_design_patterns.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>JavaScript 设计模式</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-be880710><section class="VPSidebarItem level-0" data-v-be880710 data-v-6791b800><div class="item" role="button" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link" data-v-6791b800 data-v-e660f69b><!--[--><h2 class="text" data-v-6791b800>渲染模式</h2><!--]--><!----></a><!----></div><div class="items" data-v-6791b800><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/rendering/introduction.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>概述</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/rendering/react.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>React.js 概述</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/rendering/next.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>Next.js 概述</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/rendering/client.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>客户端渲染</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/rendering/server.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>服务端渲染</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/rendering/static.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>静态渲染</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/rendering/issg.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>增量静态生成</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/rendering/progressive_hydration.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>渐进式注水</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/rendering/sssr.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>流式服务端渲染</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/rendering/react_server_components.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>React 服务端组件</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/rendering/selective_hydration.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>选择性注水</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/rendering/islands_architecture.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>孤岛架构</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-be880710><section class="VPSidebarItem level-0" data-v-be880710 data-v-6791b800><div class="item" role="button" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link" data-v-6791b800 data-v-e660f69b><!--[--><h2 class="text" data-v-6791b800>性能模式</h2><!--]--><!----></a><!----></div><div class="items" data-v-6791b800><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/optimize_loading_sequence.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>优化加载顺序</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/static_import.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>静态导入</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/dynamic_import.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>动态导入</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/import_on_visibility.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>可见时导入</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/import_on_interaction.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>可交互时导入</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/route_based_splitting.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>基于路由拆分</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/bundle_splitting.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>打包拆分</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/prpl.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>PRPL 模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/tree_shaking.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>Tree Shaking</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/preload.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>预加载</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/prefetch.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>预获取</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/optimize_loading_third_parties.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>优化加载第三方库</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/list_virtualization.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>虚拟列表</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6791b800 data-v-6791b800><div class="item" data-v-6791b800><div class="indicator" data-v-6791b800></div><a class="VPLink link link" href="/learning-patterns/performance/compressing_javascript.html" data-v-6791b800 data-v-e660f69b><!--[--><p class="text" data-v-6791b800>压缩 JavaScript</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-cc16f9d3 data-v-860be764><div class="VPDoc has-sidebar has-aside" data-v-860be764 data-v-07f23201><div class="container" data-v-07f23201><div class="aside" data-v-07f23201><div class="aside-curtain" data-v-07f23201></div><div class="aside-container" data-v-07f23201><div class="aside-content" data-v-07f23201><div class="VPDocAside" data-v-07f23201 data-v-875949cc><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-875949cc data-v-1bfdbb71><div class="content" data-v-1bfdbb71><div class="outline-marker" data-v-1bfdbb71></div><div class="outline-title" data-v-1bfdbb71>在此页中</div><nav aria-labelledby="doc-outline-aria-label" data-v-1bfdbb71><span class="visually-hidden" id="doc-outline-aria-label" data-v-1bfdbb71> Table of Contents for current page </span><ul class="root" data-v-1bfdbb71 data-v-0366e508><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-875949cc></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-07f23201><div class="content-container" data-v-07f23201><!--[--><!--]--><main class="main" data-v-07f23201><div style="position:relative;" class="vp-doc _learning-patterns_design_hooks" data-v-07f23201><div><div class="title-wrap" data-v-2ad35928><h1 class="title" data-v-2ad35928>钩子模式</h1><div class="sub-title" data-v-2ad35928>使用函数在应用中的多个组件之间重用有状态逻辑</div></div><hr><p>React 16.8 introduced a new feature called Hooks. <a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="noreferrer">Hooks</a> make it possible to use React state and lifecycle methods, without having to use a ES2015 class component.</p><p>Although Hooks are not necessarily a design pattern, Hooks play a very important role in your application design. Many traditional design patterns can be replaced by Hooks.</p><h2 id="class-组件" tabindex="-1">Class 组件 <a class="header-anchor" href="#class-组件" aria-hidden="true">#</a></h2><p>Before Hooks were introduced in React, we had to use class components in order to add state and lifecycle methods to components. A typical class component in React can look something like:</p><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyComponent</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">React</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Component</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/* Adding state and binding custom methods */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">super</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">customMethodOne</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">customMethodOne</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">bind</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">customMethodTwo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">customMethodTwo</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">bind</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/* Lifecycle Methods */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">componentDidMount</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">componentWillUnmount</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/* Custom methods */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">customMethodOne</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">customMethodTwo</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>A class component can contain a state in its constructor, lifecycle methods such as <code>componentDidMount</code> and <code>componentWillUnmount</code> to perform side effects based on a component&#39;s lifecycle, and custom methods to add extra logic to a class.</p><p>Although we can still use class components after the introduction of React Hooks, using class components can have some downsides! Let&#39;s look at some of the most common issues when using class components.</p><h3 id="理解-es2015-的类" tabindex="-1">理解 ES2015 的类 <a class="header-anchor" href="#理解-es2015-的类" aria-hidden="true">#</a></h3><p>Since class components were the only component that could handle state and lifecycle methods before React Hooks, we often ended up having to refactor functional components into a class components, in order to add the extra functionality.</p><p>In this example, we have a simple <code>div</code> that functions as a button.</p><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Button</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">className</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">btn</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">disabled</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>Instead of always displaying <code>disabled</code>, we want to change it to <code>enabled</code> when the user clicks on the button, and add some extra CSS styling to the button when that happens.</p><p>In order to do that, we need to add state to the component in order to know whether the status is <code>enabled</code> or <code>disabled</code>. This means that we&#39;d have to refactor the functional component entirely, and make it a class component that keeps track of the button&#39;s state.</p><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Button</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">React</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Component</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">super</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> enabled</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">enabled</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">btnText</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">enabled</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">enabled</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">disabled</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">className</span><span style="color:#89DDFF;">={</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">btn enabled-</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">enabled</span><span style="color:#89DDFF;">}`</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">enabled</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">enabled </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">      &gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">btnText</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">    )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>Finally, our button works the way we want it to!</p><div class="box" data-v-9bff9119><div class="code" data-v-9bff9119><pre data-v-9bff9119><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./styles.css&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Button</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { <span class="hljs-attr">enabled</span>: <span class="hljs-literal">false</span> };
  }

  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> { enabled } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;
    <span class="hljs-keyword">const</span> btnText = enabled ? <span class="hljs-string">&quot;enabled&quot;</span> : <span class="hljs-string">&quot;disabled&quot;</span>;

    <span class="hljs-keyword">return</span> (
      &lt;div
        className={`btn enabled-${enabled}`}
        onClick={() =&gt; this.setState({ enabled: !enabled })}
      &gt;
        {btnText}
      &lt;/div&gt;
    );
  }
}</code></pre></div><div class="preview" data-v-9bff9119><iframe class="content" src="https://codesandbox.io/embed/throbbing-currying-2lp9w?expanddevtools=0&amp;view=preview&amp;hidenavigation=1&amp;theme=darkcodemirror=1&amp;runonclick=1" data-v-9bff9119></iframe></div></div><p>In this example, the component is very small and refactoring wasn&#39;t a such a great deal. However, your real-life components probably contain of many more lines of code, which makes refactoring the component a lot more difficult.</p><p>Besides having to make sure you don&#39;t accidentally change any behavior while refactoring the component, you also need to <strong>understand how ES2015 classes work</strong>. Why do we have to <code>bind</code> the custom methods? What does the <code>constructor</code> do? Where does the <code>this</code> keyword come from? It can be difficult to know how to refactor a component properly without accidentally changing the data flow.</p><h3 id="重组" tabindex="-1">重组 <a class="header-anchor" href="#重组" aria-hidden="true">#</a></h3><p>The common way to share code among several components, is by using the <a href="/learning-patterns/design/hoc.html">Higher Order Component</a> or <a href="/learning-patterns/design/render_props.html">Render Props</a> pattern. Although both patterns are valid and a good practice, adding those patterns at a later point in time requires you to restructure your application.</p><p>Besides having to restructure your app, which is trickier the bigger your components are, having many wrapping components in order to share code among deeper nested components can lead to something that&#39;s best referred to as a <em><strong>wrapper hell</strong></em>. It&#39;s not uncommon to open your dev tools and seeing a structure similar to:</p><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">WrapperOne</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">WrapperTwo</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">WrapperThree</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">WrapperFour</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">WrapperFive</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Component</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Finally in the component!</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">Component</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">WrapperFive</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">WrapperFour</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">WrapperThree</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">WrapperTwo</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">WrapperOne</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>The <em>wrapper hell</em> can make it difficult to understand how data is flowing through your application, which can make it harder to figure out why unexpected behavior is happening.</p><h3 id="复杂度" tabindex="-1">复杂度 <a class="header-anchor" href="#复杂度" aria-hidden="true">#</a></h3><p>add more logic to class components, the size of the component increases fast. Logic within that component can get <strong>tangled and unstructured</strong>, which can make it difficult for developers to understand where certain logic is used in the class component. This can make debugging and optimizing performance more difficult.</p><p>Lifecycle methods also require quite a lot of duplication in the code. Let&#39;s take a look at an example, which uses a <code>Counter</code> component and a <code>Width</code> component.</p><div class="box" data-v-9bff9119><div class="code" data-v-9bff9119><pre data-v-9bff9119><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./styles.css&quot;</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Count</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Count&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Width</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Width&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">width</span>: <span class="hljs-number">0</span>
    };
  }

  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleResize</span>();
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;resize&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span>);
  }

  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&quot;resize&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span>);
  }

  increment = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function">(<span class="hljs-params">{ count }</span>) =&gt;</span> ({ <span class="hljs-attr">count</span>: count + <span class="hljs-number">1</span> }));
  };

  decrement = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function">(<span class="hljs-params">{ count }</span>) =&gt;</span> ({ <span class="hljs-attr">count</span>: count - <span class="hljs-number">1</span> }));
  };

  handleResize = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">width</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> });
  };

  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> (
      &lt;div className=&quot;App&quot;&gt;
        &lt;Count
          count={this.state.count}
          increment={this.increment}
          decrement={this.decrement}
        /&gt;
        &lt;div id=&quot;divider&quot; /&gt;
        &lt;Width width={this.state.width} /&gt;
      &lt;/div&gt;
    );
  }
}</code></pre></div><div class="preview" data-v-9bff9119><iframe class="content" src="https://codesandbox.io/embed/bold-brown-bzhpw?expanddevtools=0&amp;view=preview&amp;hidenavigation=1&amp;theme=darkcodemirror=1&amp;runonclick=1" data-v-9bff9119></iframe></div></div><p>The way the <code>App</code> component is structured can be visualized as the following:</p><p><img src="/learning-patterns/images/clasvshoks1.001.png" alt="Flow chart"></p><p>Although this is a small component, the logic within the component is already quite tangled. Whereas certain parts are specific for the <code>counter</code> logic, other parts are specific for the <code>width</code> logic. As your component grows, it can get increasingly difficult to structure logic within your component, find related logic within the component.</p><p>Besides tangled logic, we&#39;re also <strong>duplicating</strong> some logic within the lifecycle methods. In both <code>componentDidMount</code> and <code>componentWillUnmount</code>, we&#39;re customizing the behavior of the app based on the window&#39;s <code>resize</code> event.</p><h2 id="hooks" tabindex="-1">hooks <a class="header-anchor" href="#hooks" aria-hidden="true">#</a></h2><p>It&#39;s quite clear that class components aren&#39;t always a great feature in React. In order to solve the common issues that React developers can run into when using class components, React introduced <code>React Hooks</code>. React Hooks are functions that you can use to manage a components state and lifecycle methods. React Hooks make it possible to:</p><ul><li>add state to a functional component</li><li>manage a component&#39;s lifecycle without having to use lifecycle methods such as <code>componentDidMount</code> and <code>componentWillUnmount</code></li><li>reuse the same stateful logic among multiple components throughout the app</li></ul><p>First, let&#39;s take a look at how we can add state to a functional component, using React Hooks.</p><h3 id="state-hook" tabindex="-1">State Hook <a class="header-anchor" href="#state-hook" aria-hidden="true">#</a></h3><p>React provides a hook that manages state within a functional component, called <code>useState</code>.</p><p>Let&#39;s see how a class component can be restructured into a functional component, using the <code>useState</code> hook. We have a class component called <code>Input</code>, which simply renders an input field. The value of <code>input</code> in the state updates, whenever the user types anything in the input field.</p><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Input</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">React</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Component</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">super</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> input</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">handleInput</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">handleInput</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">bind</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">handleInput</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> input</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onChange</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">handleInput</span><span style="color:#89DDFF;">} </span><span style="color:#C792EA;">value</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">input</span><span style="color:#89DDFF;">} /&gt;;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>In order to use the <code>useState</code> hook, we need to access the <code>useState</code> method that React provides for us. The <code>useState</code> method expects an argument: this is the initial value of the state, an empty string in this case.</p><p>We can destructure two values from the <code>useState</code> method:</p><ol><li>The <strong>current value</strong> of the state.</li><li>The <strong>method with which we can update</strong> the state.</li></ol><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> setValue</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">useState</span><span style="color:#A6ACCD;">(initialValue)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>The first value can be compared to a class component&#39;s <code>this.state.[value]</code>. The second value can be compared to a class component&#39;s <code>this.setState</code> method.</p><p>Since we&#39;re dealing with the value of an <code>input</code>, let&#39;s call the current value of the state input, and the method in order to update the state <code>setInput</code>. The initial value should be an empty string.</p><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">input</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> setInput</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">useState</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>We can now refactor the <code>Input</code> class component into a stateful functional component.</p><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Input</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">input</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">setInput</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">useState</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onChange</span><span style="color:#89DDFF;">={(</span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setInput</span><span style="color:#A6ACCD;">(e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value)</span><span style="color:#89DDFF;">} </span><span style="color:#C792EA;">value</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">input</span><span style="color:#89DDFF;">} /&gt;;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>The value of the <code>input</code> field is equal to the current value of the <code>input</code> state, just like in the class component example. When the user types in the input field, the value of the <code>input</code> state updates accordingly, using the <code>setInput</code> method.</p><div class="box" data-v-9bff9119><div class="code" data-v-9bff9119><pre data-v-9bff9119><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Input</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> [input, setInput] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);

    <span class="hljs-keyword">return</span> (
      &lt;input
        onChange={e =&gt; setInput(e.target.value)}
        value={input}
        placeholder=&quot;Type something...&quot;
      /&gt;
    );
  }</code></pre></div><div class="preview" data-v-9bff9119><iframe class="content" src="https://codesandbox.io/embed/nervous-hoover-oicu6?expanddevtools=0&amp;view=preview&amp;hidenavigation=1&amp;theme=darkcodemirror=1&amp;runonclick=1" data-v-9bff9119></iframe></div></div><h2 id="effect-hook" tabindex="-1">Effect Hook <a class="header-anchor" href="#effect-hook" aria-hidden="true">#</a></h2><p>We&#39;ve seen we can use the <code>useState</code> component to handle state within a functional component, but another benefit of class components was the possibility to add lifecycle methods to a component.</p><p>With the <code>useEffect</code> hook, we can &quot;hook into&quot; a components lifecycle. The <code>useEffect</code> hook effectively combines the <code>componentDidMount</code>, <code>componentDidUpdate</code>, and <code>componentWillUnmount</code> lifecycle methods.</p><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">componentDidMount</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">componentWillUnmount</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">componentDidUpdate</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>Let&#39;s use the input example we used in the State Hook section. Whenever the user is typing anything in the input field, we also want to log that value to the console.</p><p>We need to use a <code>useEffect</code> hook that &quot;listens&quot; to the <code>input</code> value. We can do so, by adding <code>input</code> to the <strong>dependency array</strong> of the <code>useEffect</code> hook. The dependency array is the second argument that the <code>useEffect</code> hook receives.</p><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">The user typed </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">input</span><span style="color:#89DDFF;">}`</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [input])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>Let&#39;s try it out!</p><div class="box" data-v-9bff9119><div class="code" data-v-9bff9119><pre data-v-9bff9119><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Input</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [input, setInput] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`The user typed <span class="hljs-subst">${input}</span>`</span>);
  }, [input]);

  <span class="hljs-keyword">return</span> (
    &lt;input
      onChange={e =&gt; setInput(e.target.value)}
      value={input}
      placeholder=&quot;Type something...&quot;
    /&gt;
  );
}</code></pre></div><div class="preview" data-v-9bff9119><iframe class="content" src="https://codesandbox.io/embed/blissful-ramanujan-p237n?expanddevtools=1&amp;view=preview&amp;hidenavigation=1&amp;theme=darkcodemirror=1&amp;runonclick=1" data-v-9bff9119></iframe></div></div><p>The value of the input now gets logged to the console whenever the user types a value.</p><h2 id="custom-hooks" tabindex="-1">Custom Hooks <a class="header-anchor" href="#custom-hooks" aria-hidden="true">#</a></h2><p>Besides the built-in hooks that React provides (<code>useState</code>, <code>useEffect</code>, <code>useReducer</code>, <code>useRef</code>, <code>useContext</code>, <code>useMemo</code>, <code>useImperativeHandle</code>, <code>useLayoutEffect</code>, <code>useDebugValue</code>, <code>useCallback</code>), we can easily create our own custom hooks.</p><p>You may have noticed that all hooks start with <code>use</code>. It&#39;s important to start your hooks with <code>use</code> in order for React to check if it violates the <a href="https://reactjs.org/docs/hooks-rules.html" target="_blank" rel="noreferrer">rules of Hooks</a>.</p><p>Let&#39;s say we want to keep track of certain keys the user may press when writing the input. Our custom hook should be able to receive the key we want to target as its argument.</p><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useKeyPress</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">targetKey</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><p>We want to add a <code>keydown</code> and <code>keyup</code> event listener to the key that the user passed as an argument. If the user pressed that key, meaning the <code>keydown</code> event gets triggered, the state within the hook should toggle to <code>true</code>. Else, when the user stops pressing that button, the <code>keyup</code> event gets triggered and the state toggles to <code>false</code>.</p><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useKeyPress</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">targetKey</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">keyPressed</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">setKeyPressed</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">useState</span><span style="color:#F07178;">(</span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">handleDown</span><span style="color:#89DDFF;">({</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">key</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">})</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">targetKey</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">setKeyPressed</span><span style="color:#F07178;">(</span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">handleUp</span><span style="color:#89DDFF;">({</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">key</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">})</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">targetKey</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">setKeyPressed</span><span style="color:#F07178;">(</span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">useEffect</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">keydown</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handleDown</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">keyup</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handleUp</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">keydown</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handleDown</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">keyup</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handleUp</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> [])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">keyPressed</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>Perfect! We can use this custom hook in our input application. Let&#39;s log to the console whenever the user presses the <code>q</code>, <code>l</code> or <code>w</code> key.</p><div class="box" data-v-9bff9119><div class="code" data-v-9bff9119><pre data-v-9bff9119><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">import</span> useKeyPress <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./useKeyPress&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Input</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [input, setInput] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);
  <span class="hljs-keyword">const</span> pressQ = <span class="hljs-title function_">useKeyPress</span>(<span class="hljs-string">&quot;q&quot;</span>);
  <span class="hljs-keyword">const</span> pressW = <span class="hljs-title function_">useKeyPress</span>(<span class="hljs-string">&quot;w&quot;</span>);
  <span class="hljs-keyword">const</span> pressL = <span class="hljs-title function_">useKeyPress</span>(<span class="hljs-string">&quot;l&quot;</span>);

  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`The user pressed Q!`</span>);
  }, [pressQ]);

  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`The user pressed W!`</span>);
  }, [pressW]);

  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`The user pressed L!`</span>);
  }, [pressL]);

  <span class="hljs-keyword">return</span> (
    &lt;input
      onChange={e =&gt; setInput(e.target.value)}
      value={input}
      placeholder=&quot;Type something...&quot;
    /&gt;
  );
}</code></pre></div><div class="preview" data-v-9bff9119><iframe class="content" src="https://codesandbox.io/embed/billowing-pine-xplez?expanddevtools=0&amp;view=preview&amp;hidenavigation=1&amp;theme=darkcodemirror=1&amp;runonclick=1" data-v-9bff9119></iframe></div></div><p>Instead of keeping the key press logic local to the <code>Input</code> component, we can now reuse the <code>useKeyPress</code> hook throughout multiple components, without having to rewrite the same logic over and over.</p><p>Another great advantage of Hooks, is that the community can build and share hooks. We just wrote the <code>useKeyPress</code> hook ourselves, but that actually wasn&#39;t necessary at all! The <a href="https://github.com/streamich/react-use/blob/master/docs/useKeyPress.md" target="_blank" rel="noreferrer">hook was already built</a> by someone else and ready to use in our application if we just installed it!</p><p>Here are some websites that list all the hooks built by the community, and ready to use in your application.</p><ul><li><a href="https://github.com/streamich/react-use" target="_blank" rel="noreferrer">React Use</a></li><li><a href="https://usehooks.com/" target="_blank" rel="noreferrer">useHooks</a></li><li><a href="https://nikgraf.github.io/react-hooks/" target="_blank" rel="noreferrer">Collection of React Hooks</a></li></ul><hr><p>Let&#39;s rewrite the counter and width example shown in the previous section. Instead of using a class component, we&#39;ll rewrite the app using React Hooks.</p><div class="box" data-v-9bff9119><div class="code" data-v-9bff9119><pre data-v-9bff9119><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./styles.css&quot;</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Count</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Count&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Width</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Width&quot;</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useCounter</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">decrement</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">setCount</span>(count - <span class="hljs-number">1</span>);

  <span class="hljs-keyword">return</span> { count, increment, decrement };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useWindowWidth</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [width, setWidth] = <span class="hljs-title function_">useState</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleResize</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">setWidth</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;resize&quot;</span>, handleResize);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;resize&quot;</span>, handleResize);
  });

  <span class="hljs-keyword">return</span> width;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">useCounter</span>();
  <span class="hljs-keyword">const</span> width = <span class="hljs-title function_">useWindowWidth</span>();

  <span class="hljs-keyword">return</span> (
    &lt;div className=&quot;App&quot;&gt;
      &lt;Count
        count={counter.count}
        increment={counter.increment}
        decrement={counter.decrement}
      /&gt;
      &lt;div id=&quot;divider&quot; /&gt;
      &lt;Width width={width} /&gt;
    &lt;/div&gt;
  );
}</code></pre></div><div class="preview" data-v-9bff9119><iframe class="content" src="https://codesandbox.io/embed/eloquent-bhabha-2w0ll?expanddevtools=0&amp;view=preview&amp;hidenavigation=1&amp;theme=darkcodemirror=1&amp;runonclick=1" data-v-9bff9119></iframe></div></div><p>We broke the logic of the <code>App</code> function into several pieces:</p><ul><li><code>useCounter</code>: A custom hook that returns the current value of <code>count</code>, an <code>increment</code> method, and a <code>decrement</code> method.</li><li><code>useWindowWidth</code>: A custom hook that returns the window&#39;s current width.</li><li><code>App</code>: A functional, stateful component that returns the <code>Counter</code> and <code>Width</code> component.</li></ul><p>By using React Hooks instead of a class component, we were able to break the logic down into smaller, reusable pieces that separated the logic.</p><p>Let&#39;s visualize the changes we just made, compared to the old <code>App</code> class component.</p><p><img src="/learning-patterns/images/classicalvshooks2.001.png" alt="Flow chart"></p><p>Using React Hooks just made it much clearer to <strong>separate the logic</strong> of our component into several smaller pieces. Reusing the same stateful logic just became much easier, and we no longer have to rewrite functional components into class components if we want to make the component stateful. A good knowledge of ES2015 classes is no longer required, and having reusable stateful logic increases the testability, flexibility and readability of components.</p><h2 id="additional-hooks-guidance" tabindex="-1">Additional Hooks guidance <a class="header-anchor" href="#additional-hooks-guidance" aria-hidden="true">#</a></h2><h3 id="adding-hooks" tabindex="-1">Adding Hooks <a class="header-anchor" href="#adding-hooks" aria-hidden="true">#</a></h3><p>Like other components, there are special functions that are used when you want to add Hooks to the code you have written. Here&#39;s a brief overview of some common Hook functions:</p><h4 id="_1-usestate" tabindex="-1">1. useState <a class="header-anchor" href="#_1-usestate" aria-hidden="true">#</a></h4><p>The <code>useState</code> Hook enables developers to update and manipulate state inside function components without needing to convert it to a class component. One advantage of this Hook is that it is simple and does not require as much complexity as other React Hooks.</p><h4 id="_2-useeffect" tabindex="-1">2. useEffect <a class="header-anchor" href="#_2-useeffect" aria-hidden="true">#</a></h4><p>The <code>useEffect</code> Hook is used to run code during major lifecycle events in a function component. The main body of a function component does not allow mutations, subscriptions, timers, logging, and other side effects. If they are allowed, it could lead to confusing bugs and inconsistencies within the UI. The useEffect hook prevents all of these &quot;side effects&quot; and allows the UI to run smoothly. It is a combination of <code>componentDidMount</code> , <code>componentDidUpdate</code> , and <code>componentWillUnmount</code>, all in one place.</p><h4 id="_3-usecontext" tabindex="-1">3. useContext <a class="header-anchor" href="#_3-usecontext" aria-hidden="true">#</a></h4><p>The <code>useContext</code> Hook accepts a context object, which is the value returned from <code>React.createcontext</code>, and returns the current context value for that context. The useContext Hook also works with the React Context API in order to share data throughout the app without the need to pass your app props down through various levels.</p><p>It should be noted that the argument passed to the <code>useContext</code> hook must be the context object itself and any component calling the <code>useContext</code> always re-renders whenever the context value changes.</p><h4 id="_4-usereducer" tabindex="-1">4. useReducer <a class="header-anchor" href="#_4-usereducer" aria-hidden="true">#</a></h4><p>The <code>useReducer</code> Hook gives an alternative to <code>setState</code> and is especially preferable to it when you have complex state logic that involves multiple sub-values or when the next state depends on the previous one. It takes on a <code>reducer</code> function and an initial state input and returns the current state and a <code>dispatch</code> function as output by means of array destructuring. <code>useReducer</code> also optimizes the performance of components that trigger deep updates.</p><p><strong>Pros and Cons of using Hooks</strong></p><p>Here are some benefits of making use of Hooks:</p><p><strong>Fewer lines of code</strong> Hooks allows you group code by concern and functionality, and not by lifecycle. This makes the code not only cleaner and concise but also shorter. Below is a comparison of a simple stateful component of a searchable product data table using React, and how it looks in Hooks after using the <code>useState</code> keyword.</p><p><strong>Stateful components</strong></p><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TweetSearchResults</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">React</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Component</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">props</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">super</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">props</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        filterText</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        inThisLocation</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">handleFilterTextChange</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">handleFilterTextChange</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">bind</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">handleInThisLocationChange</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">handleInThisLocationChange</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">bind</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">handleFilterTextChange</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">filterText</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        filterText</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">filterText</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">handleInThisLocationChange</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">inThisLocation</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        inThisLocation</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">inThisLocation</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">SearchBar</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">filterText</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">filterText</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">inThisLocation</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">inThisLocation</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">onFilterTextChange</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">handleFilterTextChange</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">onInThisLocationChange</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">handleInThisLocationChange</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">          /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">TweetList</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">tweets</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">tweets</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">filterText</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">filterText</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">inThisLocation</span><span style="color:#89DDFF;">={this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">inThisLocation</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">          /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">      )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><strong>Same component with Hooks</strong></p><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> TweetSearchResults </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">({</span><span style="color:#A6ACCD;font-style:italic;">tweets</span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">filterText</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">setFilterText</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useState</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">inThisLocation</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">setInThisLocation</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useState</span><span style="color:#F07178;">(</span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">SearchBar</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">filterText</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">filterText</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">inThisLocation</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">inThisLocation</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">setFilterText</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">setFilterText</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">setInThisLocation</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">setInThisLocation</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">      /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">TweetList</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">tweets</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">tweets</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">filterText</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">filterText</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">inThisLocation</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">inThisLocation</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">      /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><strong>Simplifies complex components</strong></p><p>JavaScript classes can be difficult to manage, hard to use with hot reloading and may not minify as well. React Hooks solves these problems and ensures functional programming is made easy. With the implementation of Hooks, We don&#39;t need to have class components.</p><p><strong>Reusing stateful logic</strong></p><p>Classes in JavaScript encourage multiple levels of inheritance that quickly increase overall complexity and potential for errors. However, Hooks allow you to use state, and other React features without writing a class. With React, you can always reuse stateful logic without the need to rewrite the code over and over again. This reduces the chances of errors and allows for composition with plain functions.</p><p><strong>Sharing non-visual logic</strong></p><p>Until the implementation of Hooks, React had no way of extracting and sharing non-visual logic. This eventually led to more complexities, such as the HOC patterns and Render props, just to solve a common problem. But, the introduction of Hooks has solved this problem because it allows for the extraction of stateful logic to a simple JavaScript function.</p><p>There are of course some potential downsides to Hooks worth keeping in mind:</p><ul><li>Have to respect its rules, without a linter plugin, it is difficult to know which rule has been broken.</li><li>Need a considerable time practicing to use properly (Exp: useEffect).</li><li>Be aware of the wrong use (Exp: useCallback, useMemo).</li></ul><h3 id="react-hooks-vs-classes" tabindex="-1">React Hooks vs Classes <a class="header-anchor" href="#react-hooks-vs-classes" aria-hidden="true">#</a></h3><p>When Hooks were introduced to React, it created a new problem: how do we know when to use function components with Hooks and class components? With the help of Hooks, it is possible to get state and partial lifecycle Hooks even in function components. Hooks also allow you to use local state and other React features without writing a class.</p><p>Here are some differences between Hooks and Classes to help you decide:</p><table><thead><tr><th><strong>React Hooks</strong></th><th><strong>Classes</strong></th></tr></thead><tbody><tr><td>It helps avoid multiple hierarchies and make code clearer</td><td>Generally, when you use HOC or renderProps, you have to restructure your App with multiple hierarchies when you try to see it in DevTools</td></tr><tr><td>It provides uniformity across React components.</td><td>Classes confuse both humans and machines due to the need to understand binding and the context in which functions are called.</td></tr></tbody></table></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-07f23201 data-v-15332f6a><div class="edit-info" data-v-15332f6a><div class="edit-link" data-v-15332f6a><a class="VPLink link edit-link-button" href="https://github.com/xiaofuyesnew/learning-patterns/tree/main/docs/design/hooks.md" target="_blank" rel="noreferrer" data-v-15332f6a data-v-e660f69b><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-15332f6a><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> 在 GitHub 上编辑本页<!--]--><!----></a></div><!----></div><div class="prev-next" data-v-15332f6a><div class="pager" data-v-15332f6a><a class="pager-link prev" href="/learning-patterns/design/render_props.html" data-v-15332f6a><span class="desc" data-v-15332f6a>Previous page</span><span class="title" data-v-15332f6a>渲染属性模式</span></a></div><div class="has-prev pager" data-v-15332f6a><a class="pager-link next" href="/learning-patterns/design/flyweight.html" data-v-15332f6a><span class="desc" data-v-15332f6a>Next page</span><span class="title" data-v-15332f6a>享元模式</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-cc16f9d3 data-v-3ba42c49><div class="container" data-v-3ba42c49><p class="message" data-v-3ba42c49><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0;display:inline;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a></p><p class="copyright" data-v-3ba42c49>Copyright © 2022-present Allen Wong</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"design_command.md\":\"7dea8234\",\"contents.md\":\"3f630a09\",\"design_compound.md\":\"bcc49178\",\"design_container_presentational.md\":\"2f83f613\",\"design_factory.md\":\"e4e8e0d8\",\"design_flyweight.md\":\"acf02d88\",\"design_hoc.md\":\"7e111a74\",\"design_hooks.md\":\"a30736a6\",\"design_mixin.md\":\"db91125a\",\"design_js_design_patterns.md\":\"abfd1e33\",\"design_mediator_middleware.md\":\"19233ed9\",\"resources.md\":\"7dd284d6\",\"design_module.md\":\"40abf965\",\"design_observer.md\":\"a3601e7e\",\"rendering_react.md\":\"2d7ff3d9\",\"rendering_react_server_components.md\":\"c02506d5\",\"rendering_selective_hydration.md\":\"794fcecb\",\"rendering_server.md\":\"704ea535\",\"rendering_sssr.md\":\"c1f801bd\",\"design_render_props.md\":\"73713e05\",\"about.md\":\"7f7512b6\",\"design_provider.md\":\"c2504014\",\"design_proxy.md\":\"d2e5dd71\",\"design_introduction.md\":\"d0efc770\",\"rendering_progressive_hydration.md\":\"f4de47e9\",\"design_prototype.md\":\"d143d5a1\",\"rendering_static.md\":\"713fb6f8\",\"rendering_next.md\":\"eae9e451\",\"design_singleton.md\":\"8d601a7d\",\"index.md\":\"583436c5\",\"insights.md\":\"37605e31\",\"performance_bundle_splitting.md\":\"1a377c3d\",\"performance_compressing_javascript.md\":\"16802a68\",\"performance_dynamic_import.md\":\"9fe41ae2\",\"performance_import_on_interaction.md\":\"3d2edcc0\",\"performance_import_on_visibility.md\":\"7b574f82\",\"performance_list_virtualization.md\":\"9f6f482f\",\"performance_optimize_loading_sequence.md\":\"9f1872da\",\"performance_optimize_loading_third_parties.md\":\"51cfd7d4\",\"performance_prefetch.md\":\"a03b9197\",\"performance_preload.md\":\"46480b4f\",\"performance_prpl.md\":\"b5a0d5b6\",\"performance_static_import.md\":\"6745e163\",\"performance_tree_shaking.md\":\"72e6bc29\",\"rendering_client.md\":\"873d9fbd\",\"rendering_introduction.md\":\"364dc2c4\",\"rendering_islands_architecture.md\":\"3133b8c3\",\"rendering_issg.md\":\"2df39fc2\",\"performance_route_based_splitting.md\":\"6bc358d2\"}")</script>
    <script type="module" async src="/learning-patterns/assets/app.ba39ac68.js"></script>
    
  </body>
</html>